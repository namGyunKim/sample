<!DOCTYPE html>
<html lang="ko"
      layout:decorate="~{layout/default}"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title>홈</title>
</head>
<body>
<div layout:fragment="content">
    <h1 class="text-3xl font-bold mb-6">환영합니다!</h1>

    <div class="bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-lg"
         role="alert" sec:authorize="isAuthenticated()">
        <p class="font-bold">로그인 성공</p>
        <!-- [수정] sec:authentication의 principal.nickName은 PrincipalDetails의 getNickName()을 호출함 -->
        <p>안녕하세요, <span class="font-semibold" sec:authentication="principal.nickName">사용자</span>님. 성공적으로 로그인하셨습니다.</p>
        <!-- [수정] principal.authorities는 Collection<GrantedAuthority>를 반환합니다. -->
        <p class="text-sm mt-2">당신의 역할은 <span class="font-mono"
                                              sec:authentication="principal.authorities">ROLE_USER</span> 입니다.</p>
        <p class="text-sm mt-2">
            <a class="underline text-blue-600 hover:text-blue-800" th:href="@{/account/profile}">내 프로필 보기</a> |
            <a class="underline text-red-600 hover:text-red-800" th:href="@{/logout}">로그아웃</a>
        </p>
    </div>

    <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-lg"
         role="alert" sec:authorize="!isAuthenticated()">
        <p class="font-bold">로그인이 필요합니다</p>
        <p>서비스를 이용하려면 <a class="font-semibold underline" th:href="@{/account/login}">로그인</a> 해주세요.</p>
    </div>

    <div class="mt-8">
        <h2 class="text-2xl font-semibold mb-4">주요 기능</h2>
        <ul class="list-disc list-inside space-y-2">
            <!-- [수정] 목록 경로는 ADMIN/SUPER_ADMIN만 접근 가능함을 명시 -->
            <li><a class="text-blue-600 hover:text-blue-800" th:href="@{/member/admin/list}">관리자/최고 관리자 목록 조회</a></li>
            <li><a class="text-blue-600 hover:text-blue-800" th:href="@{/member/user/list}">일반 사용자 목록 조회 (관리자만 접근
                가능)</a></li>
            <li><a class="text-blue-600 hover:text-blue-800" th:href="@{/member/user/create}">회원 가입 (유저)</a></li>
            <li><a class="text-blue-600 hover:text-blue-800" th:href="@{/member/admin/create}">관리자 계정 생성 (관리자/최고 관리자만 접근
                가능)</a></li>
            <li><a class="text-blue-600 hover:text-blue-800" sec:authorize="isAuthenticated()"
                   th:href="@{/account/profile}">내 정보 수정 및 탈퇴</a></li>
        </ul>
    </div>
</div>
</body>
</html>